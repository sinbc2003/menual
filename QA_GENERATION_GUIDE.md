# Q&A 데이터셋 생성 작업 가이드

## 1. 프로젝트 목표

PDF 문서 기반 Q&A 시스템에서 **사용자 질문에 답변할 때 해당 PDF 원문을 하이라이트**하여 보여주는 기능 구현을 위한 Q&A 데이터셋 생성.

### 작동 방식
1. 사전에 문서 기반 예상 Q&A 쌍을 생성 (현재 작업)
2. 사용자 질문이 들어오면 embedding similarity로 가장 유사한 Q&A 매칭
3. 매칭된 Q&A의 `sources` 필드에 있는 원문 텍스트를 PDF에서 찾아 하이라이트

---

## 2. 저장소 구조

```
/home/user/menual/
├── 마크다운/                    # 소스 문서 (MD 파일들)
│   ├── 3쪽.md ~ 600+쪽.md      # 본문 페이지
│   └── ...
├── qa_dataset.jsonl            # 생성된 Q&A 데이터 (현재 80개)
└── QA_GENERATION_GUIDE.md      # 이 파일
```

### 문서 정보
- **원본**: 2025년 교육공무원 인사실무편람 (중등)
- **형식**: PDF → 마크다운 변환 완료
- **페이지**: 약 600+ 페이지

---

## 3. 문서 목차 구조 (8개 챕터)

| 챕터 | 제목 | 페이지 범위 | 현재 QA 수 |
|-----|------|-----------|-----------|
| Ⅰ | 교원의 임용 | 3~100 | 35 |
| Ⅱ | 정원 및 순회교사제 | 101~118 | 5 |
| Ⅲ | 휴직 및 복직 | 119~256 | 8 |
| Ⅳ | 복무 | 257~336 | 11 |
| Ⅴ | 계약제교원 | 337~434 | 7 |
| Ⅵ | 평정 업무 | 435~526 | 5 |
| Ⅶ | 징계 및 직위해제 | 527~596 | 5 |
| Ⅷ | 승급 및 호봉획정 | 597~끝 | 4 |

**현재 총 80개 QA 생성 완료** → 추가 생성 필요

---

## 4. JSONL 데이터 형식

각 줄에 하나의 JSON 객체:

```json
{
  "id": "q_챕터_섹션_번호",
  "question": "실제 사용자가 물어볼 법한 자연스러운 질문",
  "answer": "장학사 스타일의 상세하고 친절한 답변",
  "sources": [
    {
      "page": 페이지번호(정수),
      "title": "해당 섹션/조항 제목",
      "text": "MD파일에서 그대로 인용한 원문 텍스트"
    }
  ],
  "category": "대분류 (목차 챕터명)",
  "subcategory": "소분류 (세부 주제)",
  "keywords": ["검색용", "키워드", "배열"]
}
```

### ID 규칙
- `q_1_1_001`: 챕터1, 섹션1, 1번 질문
- `q_3_2_005`: 챕터3, 섹션2, 5번 질문

---

## 5. 질문 스타일 가이드

### 질문 작성 원칙
- **실제 교사/행정직원이 물어볼 법한 자연스러운 구어체**
- 법률 용어보다는 일상적 표현 사용
- 구체적인 상황 기반 질문 권장

### 좋은 질문 예시
```
✓ "육아휴직 기간이 얼마나 되나요?"
✓ "교감 자격연수 받으려면 어떤 조건이 필요한가요?"
✓ "기간제교원은 언제 채용할 수 있나요?"
✓ "교사가 유튜브 활동을 하려면 어떤 절차가 필요한가요?"
```

### 피해야 할 질문 예시
```
✗ "국가공무원법 제44조에 따른 휴직의 종류는?"  (너무 딱딱함)
✗ "휴직" (너무 짧음)
✗ "교육공무원법상 기간제교원의 임용에 관한 규정은?" (법률 용어 과다)
```

---

## 6. 답변 스타일 가이드

### 답변 구조
```
1. [결론/요약] - 핵심 답변 먼저
2. [상세 설명] - 조건, 절차, 기간 등 구체적 내용
3. [관련 근거] - 법령/규정 출처 명시
```

### 답변 예시

```
육아휴직 기간에 대해 안내드립니다.

**육아휴직 기간:**
- 자녀 1명에 대하여 **3년 이내**
- 만 8세 이하 또는 초등학교 2학년 이하의 자녀 양육을 위해 사용 가능

**승급 인정:**
- 첫째·둘째 자녀: 1년 이내 기간 인정
- 셋째 이후 자녀: 휴직 전 기간(3년) 인정

**관련 근거:** 「교육공무원법」 제44조, 제45조
```

### 주의사항
- **반드시 MD 파일의 원문을 기반으로 답변 작성**
- sources.text에는 **원문 그대로** 인용 (요약/수정 금지)
- 친절하고 명확한 어조 유지

---

## 7. 작업 절차

### Step 1: 페이지 읽기
```
Read tool로 마크다운 파일 읽기
예: /home/user/menual/마크다운/125쪽.md
```

### Step 2: Q&A 생성
- 해당 페이지 내용에서 예상 질문 도출
- 질문에 대한 상세 답변 작성
- 원문 인용 (sources) 정확히 기록

### Step 3: JSONL에 추가
```bash
cat >> /home/user/menual/qa_dataset.jsonl << 'EOF'
{"id": "...", "question": "...", ...}
EOF
```

### Step 4: 주기적 커밋
```bash
git add qa_dataset.jsonl
git commit -m "Add QA entries for [섹션명]"
git push -u origin claude/pdf-content-highlighting-YtPMs
```

---

## 8. 기존 생성된 Q&A 샘플

### 예시 1: 교원의 임용
```json
{
  "id": "q_1_1_001",
  "question": "교육공무원의 임용권자는 누구인가요?",
  "answer": "교육공무원의 임용권자를 안내드립니다.\n\n**대학의 장:** 대통령이 임용\n**교원 및 사무직원:** 교육감이 임용 (대학교원 제외)\n\n단, 대통령이 임용하는 경우에는 교육부장관의 제청이 필요하며, 교육감이 임용하는 경우에는 임용권을 교육장에게 위임할 수 있습니다.\n\n**관련 근거:** 「교육공무원법」 제3조(임용권자)",
  "sources": [{"page": 3, "title": "임용권자", "text": "대학의 장은 대통령이 임용하고, 대학의 장을 제외한 교원 및 사무직원은 교육감이 임용한다."}],
  "category": "교원의 임용",
  "subcategory": "임용일반",
  "keywords": ["임용권자", "교육감", "대통령", "임용"]
}
```

### 예시 2: 휴직
```json
{
  "id": "q_3_1_002",
  "question": "육아휴직은 얼마나 사용할 수 있나요?",
  "answer": "육아휴직 사용 기간을 안내드립니다.\n\n**육아휴직 기간:** 자녀 1명에 대하여 **3년 이내**\n\n**대상:** 만 8세 이하 또는 초등학교 2학년 이하의 자녀를 양육하기 위한 경우\n\n**승급 인정:**\n- 첫째·둘째 자녀: 1년 이내 기간 인정\n- 셋째 이후 자녀: 휴직 전 기간(3년) 인정\n\n**관련 근거:** 「교육공무원법」 제44조, 제45조",
  "sources": [{"page": 124, "title": "육아휴직", "text": "(육아) 만 8세 이하 또는 초등학교 2학년 이하의 자녀를 양육하기 위하여 필요하거나 여성 교육공무원이 임신 또는 출산하게 된 경우"}, {"page": 124, "title": "육아휴직 기간", "text": "(육아) 자녀 1인에 대하여 3년 이내"}],
  "category": "휴직 및 복직",
  "subcategory": "청원휴직",
  "keywords": ["육아휴직", "휴직기간", "자녀양육"]
}
```

---

## 9. 추가 생성 권장 영역

현재 QA가 부족한 영역 (우선순위):

1. **챕터 III 휴직/복직** (119~256쪽) - 현재 8개, 목표 20개 이상
   - 병가, 공무상 질병휴직, 동반휴직 등

2. **챕터 IV 복무** (257~336쪽) - 현재 11개, 목표 20개 이상
   - 연가, 병가, 공가, 특별휴가 등

3. **챕터 V 계약제교원** (337~434쪽) - 현재 7개, 목표 15개 이상
   - 기간제교원 복무, 호봉, 계약 해지 등

4. **챕터 VI 평정 업무** (435~526쪽) - 현재 5개, 목표 15개 이상
   - 경력평정, 근무성적평정, 가산점 등

---

## 10. 주의사항

1. **원문 정확성**: sources.text는 MD 파일 내용을 **그대로** 복사
2. **페이지 번호**: 파일명의 숫자가 페이지 번호 (예: 125쪽.md → page: 125)
3. **중복 방지**: 기존 qa_dataset.jsonl 확인 후 중복되지 않는 질문 생성
4. **JSON 유효성**: 각 줄이 유효한 JSON인지 확인

---

## 11. 유용한 명령어

```bash
# 현재 QA 수 확인
wc -l /home/user/menual/qa_dataset.jsonl

# 카테고리별 분포 확인
cat /home/user/menual/qa_dataset.jsonl | jq -r '.category' | sort | uniq -c

# 특정 카테고리 QA 확인
cat /home/user/menual/qa_dataset.jsonl | jq 'select(.category=="휴직 및 복직")'

# JSON 유효성 검사
cat /home/user/menual/qa_dataset.jsonl | jq . > /dev/null && echo "Valid"
```

---

**작성일:** 2026-01-24
**작성자:** Claude Opus 4.5
**목적:** 새로운 세션의 AI 모델이 Q&A 생성 작업을 이해하고 수행할 수 있도록 안내
